# Руководство по масштабированию превью

## Возможности масштабирования

Вкладка "Предпросмотр" теперь поддерживает интерактивное масштабирование для детального просмотра результата.

## Способы управления масштабом

### 1. Колесо мыши (рекомендуется)
- **Ctrl + прокрутка вверх** — увеличить масштаб
- **Ctrl + прокрутка вниз** — уменьшить масштаб

### 2. Кнопки управления
- **Кнопка "+"** — плавное увеличение
- **Кнопка "-"** — плавное уменьшение
- **Кнопка "100%"** — сброс до оригинального размера (1:1)
- **Кнопка "По размеру окна"** — автоматическая подгонка под окно

### 3. Слайдер
- Перетащите ползунок для точной настройки масштаба
- Диапазон: 10% - 1000%
- Деления по 100% для удобства

### 4. Перемещение изображения
- **Средняя кнопка мыши** (колесо) — перетаскивание изображения
- **Режим ScrollHandDrag** — автоматическая прокрутка

## Горячие клавиши

| Действие | Клавиша |
|----------|---------|
| Увеличить | `Ctrl + Прокрутка вверх` |
| Уменьшить | `Ctrl + Прокрутка вниз` |
| Перетащить | `Средняя кнопка мыши` |

## Технические детали

### Используемые технологии
- **QGraphicsView / QGraphicsScene** — основа масштабируемого просмотра
- **SmoothPixmapTransform** — сглаживание при масштабировании
- **AnchorUnderMouse** — масштабирование относительно курсора

### Лучшие практики (из Context7 PyQt6)
1. **Сглаживание**: используется `Qt.TransformationMode.SmoothTransformation` для качественного масштабирования
2. **Производительность**: изображение масштабируется на GPU через QGraphicsView
3. **Якорение**: масштабирование происходит относительно положения курсора мыши
4. **Границы**: масштаб ограничен диапазоном 10%-1000% для стабильности

## Примеры использования

### Сценарий 1: Проверка мелких деталей
1. Откройте превью документа
2. Зажмите `Ctrl` и прокрутите колесо вверх несколько раз
3. Используйте среднюю кнопку мыши для перемещения к нужной области

### Сценарий 2: Обзор всего документа
1. Нажмите кнопку **"По размеру окна"**
2. Документ автоматически подгонится под размер окна

### Сценарий 3: Точная проверка размера шрифта
1. Нажмите кнопку **"100%"**
2. Увидите документ в оригинальном разрешении (1:1)
3. Используйте слайдер для тонкой настройки

## Устранение проблем

### Превью обрезается
**Решение**: Исправлено! Теперь высота панели рассчитывается динамически на основе количества данных.

### Изображение слишком большое/маленькое
**Решение**: Используйте кнопку "По размеру окна" для автоматической подгонки.

### Нужен точный масштаб
**Решение**: Используйте слайдер или вводите значение вручную через метку масштаба.

## Архитектура

```
ZoomableImageWidget
├── ZoomableImageView (QGraphicsView)
│   ├── QGraphicsScene
│   └── QGraphicsPixmapItem
└── Панель управления
    ├── Кнопка "По размеру окна"
    ├── Кнопка "100%"
    ├── Кнопки +/-
    ├── Слайдер
    └── Метка масштаба
```

## Интеграция

Для использования масштабируемого виджета в других частях приложения:

```python
from ui.zoomable_image_widget import ZoomableImageWidget

# Создание виджета
preview = ZoomableImageWidget()

# Установка изображения
preview.setPixmap(pixmap)

# Подключение к сигналам
preview.image_view.zoomChanged.connect(on_zoom_changed)
```
